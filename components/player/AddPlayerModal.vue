<script setup lang="ts">
import type { playerType } from '@/types/player'

const emit = defineEmits(['submit', 'close'])

const props = defineProps<{
  roomId: string
}>()

const newPlayer = ref<playerType>({
  id: '',
  prefix: '',
  first_name: '',
  last_name: '',
  member_id: '',
  position: '',
  room_id: props.roomId,
  is_active: true,
  status: 'not_received'
})

const resetForm = () => {
  newPlayer.value = {
    id: '',
    prefix: '',
    first_name: '',
    last_name: '',
    member_id: '',
    position: '',
    room_id: '',
    is_active: true,
    status: 'not_received'
  }
}


const submitForm = () => {
  console.log("üß™ newPlayer submitting:", newPlayer.value)
  emit('submit', { ...newPlayer.value })
  resetForm()
}
</script>

<template>
  <dialog open class="modal modal-open">
    <div class="modal-box">
      <h3 class="font-bold text-lg mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</h3>

      <div class="form-control mb-2">
        <label class="label">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</label>
        <input v-model="newPlayer.prefix" class="input input-bordered" placeholder="‡∏ô‡∏≤‡∏¢ / ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß ..." />
      </div>

      <div class="form-control mb-2">
        <label class="label">‡∏ä‡∏∑‡πà‡∏≠</label>
        <input v-model="newPlayer.first_name" class="input input-bordered" />
      </div>

      <div class="form-control mb-2">
        <label class="label">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input v-model="newPlayer.last_name" class="input input-bordered" />
      </div>

      <div class="form-control mb-2">
        <label class="label">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å/‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</label>
        <input v-model="newPlayer.member_id" class="input input-bordered" />
      </div>

      <div class="form-control mb-2">
        <label class="label">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</label>
        <input v-model="newPlayer.position" class="input input-bordered" />
      </div>

      <div class="modal-action flex justify-between">
        <button @click="emit('close')" class="btn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button @click="submitForm" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>
  </dialog>
</template>
